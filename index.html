<div id="videos">
  <script>
    // Use the local files if it's running locally. Otherwise, use S3
    var prefix = (window.location.protocol === 'file:' || window.location.host === 'localhost:8000') ? '' : 'http://bigdada.thomaslevine.com/'
    document.write('<video class="back" src="' + prefix + '806d63479fcdb4378b22c6429a839f.webm' + '"></video>')
    document.write('<video class="top" src="' + prefix + '59726f0571c80c5f943b1157a789cf.webm' + '"></video>')
  </script>
  <noscript>
    <video class="back" src="http://bigdada.thomaslevine.com/806d63479fcdb4378b22c6429a839f.webm"></video>
    <video class="top" src="http://bigdada.thomaslevine.com/59726f0571c80c5f943b1157a789cf.webm"></video>
  </noscript>
</div>

<a id="play" href="javascript:play()"></a>
<a id="pause" href="javascript:pause()"></a>
<input type="range" id="seek" min="0" max="1" step="0.1" value="1">

<script>
  // Map across video elements
  function map(func) {
    var videos = document.querySelector('#videos video')
    var result = []
    for (var i = 0; i < videos.length; i++) {
      result.push(func(videos[i]))
    }
    return result
  }

  function play() {
    map(function(v) { v.play() })
  }

  window.onload = function() {
    // Seek to the appropriate places
    var offsets = {
      'back': 79.520136,
      'top':   6.999342
    }
    var range = [19, (3746.000512 - offsets.back)]
    document.querySelector('#videos .back').volume = 0
    document.querySelector('#videos .top').volume  = 1
    document.querySelector('#videos .back').currentTime = offsets.back + range[0]
    document.querySelector('#videos .top').currentTime  = offsets.back + range[0]
  }
</script>
